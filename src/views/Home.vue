<template>
  <div class="">
    <div id="home">
        <div class="info-area">
          <p>우리 결혼합니다.</p>
          <span class="divide"> </span>
          <h3>2020.10.17. 토요일 . 11시</h3>
          <span>웨딩스퀘어 강변점  아모르홀 4F</span>
        </div>

        <div class="main-img-area">
          <span class="date">10.17</span>
          <h1>채현 <span>X</span> 김건수</h1>
          <img src="../assets/img/main-img.jpg" alt="">
        </div>

        <div class="sub-area">
          <span class="title">신부측 피로연</span>
          <div class="sub-info">
            <h3>2020.10.10. 토요일 . 12시</h3>
            <span>호텔 머드린</span>
          </div>
        </div>

        <div class="sub-area">
          <span class="title">신부측 관광버스</span>
          <div class="sub-info">
            <h3>2020.10.17. 토요일 . 07시 출발</h3>
            <span>보령 서부 수협 앞</span>
          </div>
        </div>
    </div>

    <div id="invitation">
      <span class="title">모시는 글</span>
      <div class="text-area-k text-center">
          저희 두 사람 소중한 분들 앞에서 <br>
          평생 함께할 것을 약속하고자 합니다. <br><br>

          부부의 연을 맺는 출발점에 여러분을 초대하오니 <br>
          귀한 걸음하시어 축복해주신다면 <br>
          더없는 기쁨으로 간직하겠습니다.<br><br>

          부디 오셔서 많은 축하와 격려 부탁드리겠습니다.<br>
          <div class="people-area">
              <div class="people">
                  김영모<span class="mid-dot-after"></span>문순자 <span class="info">장남</span>  건수
              </div>
              <div class="people">
                  채수길<span class="mid-dot-after"></span>배병숙 <span class="info">장녀</span>  현
              </div>
          </div>
      </div>
      <!-- <div class="text-center">
          <span class="divide"></span>
      </div> -->
      <div class="text-area-e text-center">
          <div class="inner">
              luckily, <br>
              We have found each other's soul mates <br>to be with every moment. <br><br>
              We are in love and<br>  we're going to start our adventure.<br><br>

              We would like to invite you<br> to celebarte this specail day.<br><br>
              Please watch the first step of<br> combining two people have lived different lives.<br>
              and the first day in our new life together. <br><br>

              The honor of your presence is requested<br>
              at the marriage of<br> <br> 
              <p>
                  CHAE HYEON and KIM GUN SU<br>
              </p><br> 
              <span>
                  Saturday. October. 17th. 2020 at 11am
              </span> 
          </div>
        </div>
    </div>

    <div id="call">
      <div class="we-area">
          <span class="title">축하 연락</span>
          <div class="wrap flex-sb">
            <div class="flex-start">
                  <span class="info">신랑</span>
                  <h3>김건수</h3>
            </div>
            <div class="icon-area flex-sb">
                <a href="tel:010-5097-3434">
                      <img src="@/assets/icon/call-round.png" target="_blank" alt="전화걸기" class="icon-32">
                </a>
                <a href="sms:010-5097-3434">
                      <img src="@/assets/icon/msg-round.png" target="_blank" alt="메세지 보내기" class="icon-32">
                </a>
            </div>
        </div>
        <div class="wrap flex-sb">
            <div class="flex-start">
                  <span class="info">신부</span>
                  <h3>채현</h3>
            </div>
            <div class="icon-area flex-sb">
                <a href="tel:010-3181-7072">
                      <img src="@/assets/icon/call-round.png" target="_blank" alt="전화걸기" class="icon-32">
                </a>
                <a href="sms:010-3181-7072">
                      <img src="@/assets/icon/msg-round.png" target="_blank" alt="메세지 보내기" class="icon-32">
                </a>
            </div>
        </div>
      </div>
      <div class="parants-area">
        <span class="title">혼주에게 연락하기</span>
        <div class="parants">
          <div class="flex-sb">
            <h4>신부측</h4>
              <!-- <button class="plus" @click="plusAccount1 = !plusAccount1">마음 전하실 곳</button> -->
          </div>
          <!-- <transition name="fade">
              <div v-show="plusAccount1" class="flex-col-center plus-area">
                  <span>우리은행. 1002-529-645527</span>
                  <span>계좌주. 배병숙</span>
              </div>
          </transition> -->
          <div class="">
            <div class="wrap flex-sb">
                  <div class="flex-sb">
                      <span class="info">아버지</span>
                      <h3>채수길</h3>
                  </div>
                  <div class=" icon-area flex-sb">
                    <a href="tel:010-7307-7072">
                          <img src="@/assets/icon/call-round-g.png" target="_blank" alt="전화걸기" class="icon-32">
                      </a>
                      <a href="sms:010-7307-7072">
                          <img src="@/assets/icon/msg-round-g.png" target="_blank" alt="메세지 보내기" class="icon-32">
                      </a>
                  </div>
              </div>
              <div class="wrap flex-sb">
                  <div class="flex-sb">
                      <span class="info">어머니</span>
                      <h3>배병숙</h3>
                  </div>
                  <div class="icon-area flex-sb">
                      <a href="tel:010-2422-7072">
                          <img src="@/assets/icon/call-round-g.png" target="_blank" alt="전화걸기" class="icon-32">
                      </a>
                      <a href="sms:010-2422-7072">
                          <img src="@/assets/icon/msg-round-g.png" target="_blank" alt="메세지 보내기" class="icon-32">
                      </a>
                  </div>
                </div>
              </div>
          </div>
          <div class="parants">
            <div class="flex-sb">
                <h4>신랑측</h4>
                <!-- <span class="plus" @click="plusAccount2 = !plusAccount2">마음 전하실 곳</span> -->
            </div>
            <!-- <transition name="fade">
                <div v-show="plusAccount2" class="flex-col-center plus-area">
                    <span>국민은행. 689501-01-352960</span>
                    <span>계좌주. 김영모</span>
                </div>
            </transition> -->
            <div class="">
                <div class="wrap flex-sb">
                    <div class="flex-sb">
                        <span class="info">아버지</span>
                        <h3>김영모</h3>
                    </div>
                    <div class="icon-area flex-sb">
                      <a href="tel:010-5417-3400">
                            <img src="@/assets/icon/call-round-g.png" target="_blank" alt="전화걸기" class="icon-32">
                        </a>
                        <a href="sms:010-5417-3400">
                            <img src="@/assets/icon/msg-round-g.png" target="_blank" alt="메세지 보내기" class="icon-32">
                        </a>
                    </div>
                </div>
                <div class="wrap flex-sb">
                      <div class="flex-sb">
                          <span class="info">어머니</span>
                          <h3>문순자</h3>
                      </div>
                      <div class="icon-area flex-sb">
                          <a href="tel:010-2304-5505">
                              <img src="@/assets/icon/call-round-g.png" target="_blank" alt="전화걸기" class="icon-32">
                          </a>
                          <a href="sms:010-2304-5505">
                              <img src="@/assets/icon/msg-round-g.png" target="_blank" alt="메세지 보내기" class="icon-32">
                          </a>
                      </div>
                  </div>
                </div>
            </div>    
        </div>
      </div>

      <div id="gallery">
       <span class="title">웨딩 사진</span>
       <div class="photo-area" >
           <div class="item">
                <div class=""
                    v-for="item in photo" :key="item"> 
                    <img :src="require(`@/assets/img/img_${item}.jpg`)" alt="img">
                </div>
           </div>
       </div>
    </div>

  <div id="location">
    <span class="title">오시는 길</span>
    <div class="weddingsqure-area">
        <h3>웨딩스퀘어_강변점 아모르홀</h3>
        <div class="addr-area flex-sb-st">
            <div class="addr-copy flex-sb">
                <textarea type="text" id="addrVal" value="서울특별시 광진구 광나루로56길 85 강변테크노마트 3, 4층" readonly >서울특별시 광진구 광나루로56길 85 강변테크노마트 3, 4층
                </textarea>
                <button @click="textCopy">주소복사</button>
            </div>
        </div>
        <div class="flex-sb">
            <span class="tel">02-3424-7000</span>
            <a href="tel:02-3424-7000">전화걸기</a>
        </div>
    </div>

    <!-- map area -->
    <div class="map-wapper">
        <div id="map"> </div>
        <a href="https://map.daum.net/link/to/강변 테크노마트,37.535207,127.095788" target="_blank">카카오맵으로 보기</a>
    </div>

    <div class="coming-way">
        <h4>지하철 이용시</h4>
        <span class="">2호선 강변역 하차 <br>(테크노마트 판매동 지하 1층과 직접 연결)</span>
        <h4>버스 이용시</h4>
        <div class="flex-start-st">
            <div class="width-25">
                서울버스
            </div>
            <div class="width-75">
                지선버스 : 2224, 3212, 3214 <br>
                마을버스 : 강동01, 광진01, 광진03, 광진04
            </div>
        </div>
        <div class="flex-start-st">
            <div class="width-25">
                경기버스
            </div>
            <div class="width-75">
                일반버스 : 1, 1-1, 1-2, 9, 9-1, 13, 13-2, 15, 91, 92, 93, 95, 96, 97, 112, 112-1, 2000-1, 2000-3, 2000-4 <br>
                직행버스 : 11, 1112, 1113, 1113-1, 1113-2, 1117, 1650, 1660, 5600, 5700 <br>
                공항버스 : 6705
            </div>
        </div>
        <h4>주차안내</h4>
        <span class="">강변 테크노마트 지하주차장 이용</span>
        <h4>테크노마트 내 이동시</h4>
        <span class="">엘리베이터가 혼잡하므로, 에스컬레이터를 이용하시면 더욱 편리합니다.</span>
    </div>
    </div>


  <div id="comments">
        <span class="title">축하 메세지 남기기</span>
        <form class="comments-area" ref="form">
            <input type="text" placeholder="이름" v-model="name">
            <textarea v-model="msg"  cols="30" rows="5" placeholder="축하메세지를 남겨주세요."></textarea>
            <button type="submit" @click="submit">축하메세지 남기기</button>
        </form>

        <span class="title">축하 메세지</span>
        <ul class="msg-area flex-col-reverse">
            <li v-for="comment in comments" :key="comment.name">
                <div class="flex-sb name-area">
                    <h4>{{comment.name}}</h4>
                    <span class="font-14-g text-right">{{comment.create_date}}</span>
                </div>
                <div class="msg">
                    {{comment.msg}}
                </div>
            </li>
        </ul>
        

    </div>
  
  
  
  
  </div>

  
</template>

<script>
import db from '@/fb'

export default {
  
 
  data(){
        return{
            plusAccount1: false,
            plusAccount2: false,

              photo: [
                '21','22','23','24','25','26','27','28','29','30',
                '31','32','33','34','14','15','16','17','18','19','20',
                '02','03','04','05','06','07','08','09','10',
                '11','12','13','01',
            ],
             name:'',
            msg:'',
            create_date:'',

            comments:[]
        }
  },
  mounted() {
         window.kakao && window.kakao.maps ? this.initMap() : this.addScript(); 
    }, 
    methods : { 
        textCopy(){
            var textToCopy = document.getElementById('addrVal');
            textToCopy.select();
            textToCopy.setSelectionRange(0, 9999); 
            document.execCommand("copy");
        },
        initMap() { 
            var container = document.getElementById('map'); 
            var options = { center: new kakao.maps.LatLng(37.535344, 127.095805), level: 4 }; 
            var map = new kakao.maps.Map(container, options); 
            //마커추가하려면 객체를 아래와 같이 하나 만든다. 
            var marker = new kakao.maps.Marker({ 
                position: map.getCenter() 
            }); 
            marker.setMap(map); 

            var zoomControl = new kakao.maps.ZoomControl();
            map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
        }, 
        addScript() { 
            const script = document.createElement('script');
            /* global kakao */ 
            script.onload = () => kakao.maps.load(this.initMap); 
            script.src = 'http://dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=39276f27d4001ea3e8b989ea0b22b8c5'; 
            document.head.appendChild(script); 
        } ,
         submit(){
                const today = new Date();
                const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
                const time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
                const dateTime = date +' '+ time;
                this.create_date = dateTime;

                const comment = {
                    name: this.name,
                    msg: this.msg,
                    create_date: this.create_date
                }

                db.collection('comments').add(comment).then(() => {
                    console.log('added to db');
                    this.reset();
                })
                // this.$router.go($router.currentRoute);
                this.$router.replace('/').catch(()=>{});
            
        },
      },
      created(){
        db.collection('comments').onSnapshot( res => {
            const changes = res.docChanges()

            changes.forEach(change => {
                if(change.type === 'added'){
                    this.comments.push({
                        ...change.doc.data(),
                        id: change.doc.id
                    })
                }
            })
        })
        this.$router.replace('/').catch(()=>{});
    }

}
</script>

<style scoped lang="scss">
#home{
  overflow-y: scroll;
  margin-bottom: 100px;
  .info-area{
    // text-align: center;
    padding: 45px 20px 24px ;
    p{
      font-size: 18px;
      font-weight: 300;
    }

    span{
      font-size: 14px;
      // font-weight: bold;
    }
  }
  .main-img-area{
    width: 100%;
    // margin: auto;
    padding: 0 20px;
    box-sizing: border-box;
    position: relative;
    h1{
      position: absolute;
      top: 60px;
      color: #222;
      left: 50%;
      transform: translateX(-50%);
      opacity: .7;
      font-weight: 300;
      border-bottom: 0px solid rgba(95, 95, 95,.2);
      box-shadow: inset 0 -15px 0 rgba(95, 95, 95,.2);
      padding: 0 5px;
      span{
        font-weight: 100;
        font-size: 16px;
        line-height: 28px;
        opacity: .6;
      }
    }
    .date{
      position: absolute;
      top: -21px;
      right: 32px;
      background: #666;
      color: #fff;
      font-weight: bold;
      font-size: 12px;
      width: 42px;
      height: 42px;
      border-radius: 25px;
      line-height: 42px;
      text-align: center;
      box-shadow: 2px 4px 15px 2px rgba(0,0,0, .2);
    }
    img{
      width: 100%;
    }
  }
  .sub-area{
    padding: 30px 20px 0;
    .sub-info{
      padding: 10px 0 10px 10px;
      span{
        font-size: 14px;
      }
    }
  }

}
#invitation{
        font-size: 16px ;
        color: #292929;
        padding: 55px 0px 40px;
        .title{
            margin: 0 20px;
        }
        .text-area-k{
            padding: 40px 20px 35px;
            .people-area{
                padding-top: 30px;
                width: 185px;
                margin: 0 auto;
                text-align: left;
                font-weight: bold;
                font-size: 16px;
                .people{
                    margin: 3px 0;
                    .info{
                        font-size: 14px;
                        color: #999;
                        padding: 0 8px;
                    }
                }
            }
        }
        .text-area-e{
            font-size: 14px ;
            padding: 40px 0 80px;
            color: #666;
            // background: #ffeff0;
            background: #f5f5f5;;
            .inner{
                padding: 0 20px;
            }
            p{
                font-weight: bold;
                font-size: 16px;
            }
            span{
                font-weight: bold;
            }
        }
    }
#call{
    padding: 30px 0px;
    .info{
        font-size: 14px;
        font-weight: 300;
        margin-right: 16px;
    }
    .plus{
        font-size: 13px;
        // color: #097fff;
        color: #7abaff;
    }
    .wrap {
        padding: 20px 0px 5px 15px;
    }

    .icon-area{
        a{
            display: block;
            &:last-child{
                margin-left: 20px;
            }
        }
    }
    .we-area{
        padding: 24px 30px 24px;
    }
    .plus-area{
        font-size: 14px;
        color: #999;
        padding: 5px 0;
        background: #fafafa;
        margin: 15px 0 0;
        span{
            margin: 3px 0;
        }
    }
    .parants-area{
        padding: 32px 30px 80px;
        background: #f5f5f5;
        .parants{
            padding: 25px 0 5px;
        }
    }
    .fade-enter-active, .fade-leave-active {
        transition: .4s;
        opacity: 1;
        height: 56px;
    }
    .fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
        opacity: 0;
        height: 0;
    }
}

#gallery{
    padding: 55px 15px 80px;
    position: relative;
    .photo-area{
        padding: 20px 0;
        width: 100%;   
        .item{
            width: 100%;
            display: flex;
            flex-direction: column;
            div{
                padding: 4px;
                box-sizing: border-box;
                width: 100%;
                img{
                    width: 100%;
                    display: block;
                    border-radius: 8px;
                }
            }
        }
    }
}

 #location{
    padding: 55px 20px 80px;
    .weddingsqure-area{
        padding: 15px 0px 15px 10px;
        .addr-area{
            padding: 6px 0;
            .addr-copy{
                width: 100%;
                textarea{
                    font-size: 14px;
                    margin: 3px 0;
                    width: 80%;
                }
                button{
                    color: #7abaff;
                    font-size: 13px;
                }
            }
        }
        .tel{
            font-size: 14px;
            color: #999;
        }
        a{
            color: #7abaff;
            font-size: 13px;
            margin-left: 10px;
        }
    }
    .map-wapper{
        position: relative;
        #map{
            width: 100%;
            height: 300px;
        }
        a{
            display: block;
            position: absolute;
            bottom: 0;
            width: 100%;
            background: rgba(0, 0, 0, .5);
            // background: #fed041;
            z-index: 100;
            color: #fff;
            text-align: center;
            padding: 10px;
            font-size: 13px;
            box-sizing: border-box;
        }
    }
    .coming-way{
        padding: 10px 0px 10px 10px;
        font-size: 14px;
        color: #999;
        h4{
            margin: 10px 0 5px;
            color: #292929;
        }
    }   
}

#comments{
    padding: 55px 20px 75px;
    input{
        width: 100%;
        margin: 20px 0 10px;
        padding: 10px 12px;
        box-sizing: border-box;
        font-size: 16px;
        background: #fafafa;
        border: none;
        font-size: 14px;
        &::placeholder{
            color: #999;

        }
    }
    textarea{
        width: 100%;
        padding: 10px 12px;
        box-sizing: border-box;
        font-size: 16px;
        background: #fafafa;
        border: none;
        font-size: 14px;
         &::placeholder{
            color: #999;
            
        }
    }
    button{
        width: 100%;
        padding: 12px 12px;
        box-sizing: border-box;
        font-size: 14px;
        background: #ebb8be;
        color: #fff;
        margin: 10px 0 30px;
    }
    .msg-area{
        // margin: 10px;
        color: #999;
        font-size: 14px;
        li{
            margin: 10px 0;
            padding: 15px 10px;
            // box-shadow: 0px 2px 15px 1px rgba(0, 0, 0, 0.08);
            border-bottom: 1px solid #f2f2f2;
            .name-area{
                margin-bottom: 6px;
                h4{
                    color: #555;
                }
            }
        }
    }
}
</style>
